# Мультиязычность (i18n)

Проект настроен для поддержки нескольких языков с использованием библиотеки `next-intl`.

## Структура

```
src/
├── app/
│   ├── localization/
│   │   ├── config.ts      # Конфигурация языков
│   │   ├── request.ts     # Конфигурация next-intl
│   │   ├── routing.ts     # Роутинг с поддержкой локалей
│   │   └── translates/
│   │       ├── en.json    # Английские переводы
│   │       └── fr.json    # Французские переводы
│   ├── [locale]/          # Динамический роутинг по языкам
│   │   ├── layout.tsx
│   │   └── page.tsx
│   └── styles/
│       └── globals.scss
└── widgets/               # Виджеты (header, footer)
└── shared/                # Общие компоненты

middleware.ts              # Middleware для определения языка
```

## Поддерживаемые языки

- `en` - English (по умолчанию)
- `fr` - Français

## Добавление нового языка

1. Добавьте код языка в `src/app/localization/config.ts`:

```typescript
export const locales = ["en", "fr", "de"] as const; // добавить 'de'
```

2. Добавьте название языка:

```typescript
export const localeNames: Record<Locale, string> = {
  en: "English",
  fr: "Français",
  de: "Deutsch", // добавить
};
```

3. Создайте файл переводов `src/app/localization/translates/de.json` с той же структурой, что и `en.json`

## Использование переводов

### В клиентских компонентах

```tsx
"use client";

import { useTranslations } from "next-intl";

export function MyComponent() {
  const t = useTranslations("navigation");

  return <div>{t("rankings")}</div>;
}
```

### В серверных компонентах

```tsx
import { getTranslations } from "next-intl/server";

export default async function MyPage() {
  const t = await getTranslations("home");

  return <h1>{t("title")}</h1>;
}
```

### Использование Link с поддержкой локалей

```tsx
import { Link } from "@/app/localization/routing";

<Link href="/about">About</Link>; // автоматически добавит префикс языка
```

## Структура файлов переводов

Файлы переводов организованы по разделам:

```json
{
  "common": {
    "loading": "Loading...",
    "error": "Error"
  },
  "navigation": {
    "rankings": "Rankings",
    "events": "Events"
  },
  "home": {
    "title": "Home Page",
    "description": "Description"
  }
}
```

## Переключение языка

Используйте компонент `LanguageSwitcher`:

```tsx
import { LanguageSwitcher } from "@/shared/components/language-switcher";

<LanguageSwitcher />;
```

## URL структура

- Английский: `/en/...`
- Французский: `/fr/...`

Middleware автоматически перенаправляет с корневого URL на URL с префиксом языка.

## Добавление новых переводов

1. Добавьте ключ в `src/app/localization/translates/en.json`
2. Добавьте перевод в `src/app/localization/translates/fr.json` (и другие языки)
3. Используйте в компонентах через `useTranslations` или `getTranslations`
